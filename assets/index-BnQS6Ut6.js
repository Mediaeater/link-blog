import{r as Qe,a as nt}from"./vendor-BRnhmgIC.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const f of h)if(f.type==="childList")for(const w of f.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&l(w)}).observe(document,{childList:!0,subtree:!0});function n(h){const f={};return h.integrity&&(f.integrity=h.integrity),h.referrerPolicy&&(f.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?f.credentials="include":h.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(h){if(h.ep)return;h.ep=!0;const f=n(h);fetch(h.href,f)}})();var ye={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae;function ot(){if(Ae)return re;Ae=1;var o=Qe(),m=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,h=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function w(p,g,k){var v,T={},M=null,A=null;k!==void 0&&(M=""+k),g.key!==void 0&&(M=""+g.key),g.ref!==void 0&&(A=g.ref);for(v in g)l.call(g,v)&&!f.hasOwnProperty(v)&&(T[v]=g[v]);if(p&&p.defaultProps)for(v in g=p.defaultProps,g)T[v]===void 0&&(T[v]=g[v]);return{$$typeof:m,type:p,key:M,ref:A,props:T,_owner:h.current}}return re.Fragment=n,re.jsx=w,re.jsxs=w,re}var De;function it(){return De||(De=1,ye.exports=ot()),ye.exports}var e=it(),r=Qe(),me={},Pe;function lt(){if(Pe)return me;Pe=1;var o=nt();return me.createRoot=o.createRoot,me.hydrateRoot=o.hydrateRoot,me}var ct=lt(),dt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ut=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mt=(o,m)=>{const n=r.forwardRef(({color:l="currentColor",size:h=24,strokeWidth:f=2,absoluteStrokeWidth:w,children:p,...g},k)=>r.createElement("svg",{ref:k,...dt,width:h,height:h,stroke:l,strokeWidth:w?Number(f)*24/Number(h):f,className:`lucide lucide-${ut(o)}`,...g},[...m.map(([v,T])=>r.createElement(v,T)),...(Array.isArray(p)?p:[p])||[]]));return n.displayName=`${o}`,n};var L=mt;const Re=L("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ht=L("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),pt=L("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),gt=L("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ft=L("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),xt=L("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),$e=L("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Oe=L("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),wt=L("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),bt=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ve=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),yt=L("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),vt=L("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Me=L("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),pe=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_e={"github.com":["github","open-source","code"],"stackoverflow.com":["stackoverflow","programming","help"],"medium.com":["article","blog","medium"],"dev.to":["article","blog","dev-community"],"youtube.com":["video","youtube"],"twitter.com":["twitter","social-media"],"linkedin.com":["linkedin","professional","business"],"reddit.com":["reddit","discussion","community"],"hackernews.com":["hackernews","tech-news"],"news.ycombinator.com":["hackernews","tech-news"],"techcrunch.com":["news","tech-news","startup"],"wired.com":["news","technology"],"arstechnica.com":["news","technology"],"theverge.com":["news","technology"],"smashingmagazine.com":["web-development","design","tutorial"],"css-tricks.com":["css","web-development","tutorial"],"codepen.io":["frontend","css","javascript","demo"],"dribbble.com":["design","inspiration","ui"],"behance.net":["design","portfolio","creative"],"figma.com":["design","tools","ui"],"notion.so":["productivity","tools","workspace"],"vercel.com":["deployment","frontend","tools"],"netlify.com":["deployment","frontend","tools"],"aws.amazon.com":["aws","cloud","infrastructure"],"cloud.google.com":["gcp","cloud","infrastructure"],"azure.microsoft.com":["azure","cloud","microsoft"],"docker.com":["docker","containers","devops"],"kubernetes.io":["kubernetes","containers","devops"],"npmjs.com":["npm","javascript","package"],"pypi.org":["python","package","pip"]},Ue={javascript:["javascript","web-development"],python:["python","programming"],react:["react","javascript","frontend"],vue:["vue","javascript","frontend"],angular:["angular","javascript","frontend"],node:["nodejs","javascript","backend"],typescript:["typescript","javascript"],css:["css","frontend","styling"],html:["html","frontend","web-development"],sql:["sql","database"],mongodb:["mongodb","database","nosql"],postgresql:["postgresql","database","sql"],mysql:["mysql","database","sql"],api:["api","backend","integration"],rest:["api","rest","backend"],graphql:["graphql","api","backend"],docker:["docker","containers","devops"],kubernetes:["kubernetes","devops","containers"],aws:["aws","cloud","infrastructure"],firebase:["firebase","backend","google"],redis:["redis","cache","database"],nginx:["nginx","web-server","devops"],apache:["apache","web-server"],tutorial:["tutorial","learning"],guide:["guide","tutorial"],documentation:["documentation","reference"],cheatsheet:["reference","cheatsheet"],"best practices":["best-practices","guide"],performance:["performance","optimization"],security:["security","important"],testing:["testing","quality"],deployment:["deployment","devops"],monitoring:["monitoring","devops"],analytics:["analytics","data"],"machine learning":["machine-learning","ai","data-science"],"artificial intelligence":["ai","machine-learning"],"data science":["data-science","analytics","python"],blockchain:["blockchain","crypto"],cryptocurrency:["crypto","blockchain"],blog:["blog","article"],article:["article","blog"],video:["video"],course:["course","learning"],book:["book","resource"],podcast:["podcast","audio"],newsletter:["newsletter"],tool:["tools","useful"],library:["library","code"],framework:["framework","code"],plugin:["plugin","extension"],theme:["theme","design"],template:["template","design"]};function Fe(o,m="",n=""){const l=new Set;try{const f=new URL(o),w=f.hostname.toLowerCase().replace(/^www\./,""),p=f.pathname.toLowerCase();_e[w]&&_e[w].forEach(k=>l.add(k)),p.includes("/blog")&&l.add("blog"),p.includes("/tutorial")&&l.add("tutorial"),p.includes("/guide")&&l.add("guide"),(p.includes("/docs")||p.includes("/documentation"))&&l.add("documentation"),p.includes("/api")&&l.add("api"),p.includes("/reference")&&l.add("reference"),p.includes("/example")&&l.add("example"),p.includes("/demo")&&l.add("demo"),p.includes("/video")&&l.add("video"),p.includes("/course")&&l.add("course"),p.includes("/tool")&&l.add("tools");const g=`${m} ${n}`.toLowerCase();Object.keys(Ue).forEach(k=>{g.includes(k)&&Ue[k].forEach(v=>l.add(v))}),o.match(/\.(pdf)$/i)&&l.add("pdf"),o.match(/\.(mp4|mov|avi|mkv)$/i)&&l.add("video"),o.match(/\.(mp3|wav|flac)$/i)&&l.add("audio"),o.match(/\.(zip|tar|gz|rar)$/i)&&l.add("download"),g.match(/\b(how to|tutorial|guide|walkthrough)\b/)&&l.add("tutorial"),g.match(/\b(tips|tricks|best practices)\b/)&&l.add("tips"),g.match(/\b(breaking|news|announcement)\b/)&&l.add("news"),g.match(/\b(free|open source|libre)\b/)&&l.add("free"),g.match(/\b(awesome|amazing|incredible|must)\b/)&&l.add("interesting")}catch(f){console.warn("Error parsing URL for tag suggestions:",f)}return Array.from(l).sort((f,w)=>f.length!==w.length?f.length-w.length:f.localeCompare(w)).slice(0,8)}const Be="",kt=async()=>{try{const o=await fetch(`${Be}/api/archives`);if(!o.ok)throw new Error("Failed to load archive metadata");return await o.json()}catch(o){return console.error("Error loading archive metadata:",o),[]}},jt=async o=>{try{const m=await fetch(`${Be}/api/archive/${o}`);if(!m.ok)throw new Error(`Failed to load archive for ${o}`);return(await m.json()).links||[]}catch(m){return console.error(`Error loading archive for ${o}:`,m),[]}};function Nt({links:o=[],forceShow:m=!1,onClose:n}){const[l,h]=r.useState(!1),[f,w]=r.useState(!1),[p,g]=r.useState(0),[k,v]=r.useState(!1),[T,M]=r.useState(!1),[A,j]=r.useState(!1),[D,q]=r.useState(!0),[Q,E]=r.useState(25),S=r.useRef(null),_=r.useRef(null),J=r.useRef(null),ee=r.useRef(null),U=m,R=r.useMemo(()=>o.filter(u=>u.pullQuote&&u.pullQuote.trim().length>0),[o]),C=R[p]||o[p]||null,V=u=>u?new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",F=u=>{if(!u)return"";try{return new URL(u).hostname.replace(/^www\./,"")}catch{return""}},N=r.useCallback(()=>{const u=R.length>0?R:o;u.length!==0&&(j(!0),setTimeout(()=>{g(b=>(b+1)%u.length),j(!1)},1e3))},[R,o]);r.useEffect(()=>{ee.current=N},[N]),r.useEffect(()=>{if(!U||l||A||(R.length>0?R:o).length===0)return;const b=setInterval(()=>{ee.current&&ee.current()},32e3);return()=>clearInterval(b)},[U,l,A,R.length,o.length]),r.useEffect(()=>{const u=()=>{const G=window.matchMedia("(orientation: landscape)").matches,K=window.matchMedia("(max-width: 768px)").matches;w(G&&K)};u();const b=window.matchMedia("(orientation: landscape)"),O=window.matchMedia("(max-width: 768px)");return b.addEventListener("change",u),O.addEventListener("change",u),()=>{b.removeEventListener("change",u),O.removeEventListener("change",u)}},[]),r.useEffect(()=>{const u=window.matchMedia("(prefers-reduced-motion: reduce)");v(u.matches);const b=O=>v(O.matches);return u.addEventListener("change",b),()=>u.removeEventListener("change",b)},[]),r.useEffect(()=>{k&&h(!0)},[k]),r.useEffect(()=>{const b=setTimeout(()=>{if(S.current&&_.current){const O=S.current.scrollHeight,G=_.current.clientHeight,K=O-G;if(K>20){M(!0);const ne=Math.max(15,Math.min(60,K/40));E(ne)}else M(!1)}},100);return()=>clearTimeout(b)},[p,C]),r.useEffect(()=>U?(D&&(()=>{J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{q(!1)},3e3)})(),()=>{J.current&&clearTimeout(J.current)}):void 0,[U,D]);const $=r.useCallback(u=>{u.target.closest(".ticker-control")||q(!0)},[]);r.useEffect(()=>{if(!U)return;const u=b=>{b.target.tagName!=="INPUT"&&(b.key===" "?(b.preventDefault(),h(O=>!O)):(b.key==="ArrowRight"||b.key==="n")&&N())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[U,N]);const te=()=>{h(u=>!u)},B=()=>{C!=null&&C.url&&window.open(C.url,"_blank","noopener,noreferrer")};if(!U||!C&&o.length===0||!C)return null;const se=R.length>0?R:o;return e.jsxs("div",{className:"ticker-container",role:"region","aria-live":"polite","aria-label":"News ticker",onClick:$,children:[e.jsxs("div",{className:`ticker-card ${A?"ticker-fade-out":""}`,onClick:B,children:[e.jsxs("div",{className:"ticker-headline",children:[e.jsx("span",{className:"ticker-source",children:C.source}),e.jsx("span",{className:"ticker-domain",children:F(C.url)})]}),e.jsx("div",{className:"ticker-quote-track",ref:_,children:e.jsx("div",{className:`ticker-quote ${T?"needs-scroll":""}`,ref:S,style:T?{"--scroll-duration":`${Q}s`}:void 0,children:C.pullQuote||C.source},p)}),e.jsxs("div",{className:"ticker-footer",children:[e.jsx("span",{className:"ticker-date",children:V(C.timestamp)}),C.tags&&C.tags.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"ticker-separator",children:"â€¢"}),e.jsx("span",{className:"ticker-tags",children:C.tags.join(", ")})]})]}),e.jsx("div",{className:`ticker-progress ${D?"":"ticker-hidden"}`,children:e.jsxs("span",{children:[p+1," / ",se.length]})})]}),e.jsxs("div",{className:`ticker-controls ${D?"":"ticker-hidden"}`,children:[e.jsx("button",{className:"ticker-control",onClick:u=>{u.stopPropagation(),te()},"aria-label":l?"Resume":"Pause","aria-pressed":l,children:l?e.jsx(wt,{className:"w-6 h-6"}):e.jsx(xt,{className:"w-6 h-6"})}),e.jsx("button",{className:"ticker-control",onClick:u=>{u.stopPropagation(),N()},"aria-label":"Next",children:e.jsx(yt,{className:"w-6 h-6"})}),n&&e.jsx("button",{className:"ticker-control",onClick:u=>{u.stopPropagation(),n()},"aria-label":"Close",children:e.jsx(pe,{className:"w-6 h-6"})})]})]})}const qe="";function St(){const[o,m]=r.useState(null),[n,l]=r.useState(!0),[h,f]=r.useState(!1),[w,p]=r.useState(!1),[g,k]=r.useState(""),[v,T]=r.useState(!1),[M,A]=r.useState(null),j=r.useCallback(async()=>{try{const E=await fetch(`${qe}/api/digest/status`);if(E.ok){const S=await E.json();m(S),A(null)}}catch{A("Could not fetch digest status")}finally{l(!1)}},[]);r.useEffect(()=>{j()},[j]);const D=async(E=!1)=>{f(!0),T(!1);try{const _=await(await fetch(`${qe}/api/digest/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({markAsDigested:E})})).json();_.success?(k(_.html),p(!0),E&&j()):A(_.error||"Failed to generate digest")}catch{A("Failed to generate digest")}finally{f(!1)}},q=async()=>{try{await navigator.clipboard.writeText(g),T(!0)}catch{const S=document.createElement("textarea");S.value=g,document.body.appendChild(S),S.select(),document.execCommand("copy"),document.body.removeChild(S),T(!0)}},Q=async()=>{await D(!0),p(!1)};return n?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>D(!1),disabled:h||!o||o.undigestedCount===0,className:`px-3 py-1.5 rounded text-sm font-medium flex items-center gap-2 ${o!=null&&o.ready?"bg-amber-500 hover:bg-amber-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[h?"Generating...":"WP Digest",o&&e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${o.ready?"bg-amber-600":"bg-gray-400 dark:bg-gray-600"}`,children:o.undigestedCount})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["WordPress Digest (",o==null?void 0:o.undigestedCount," links)"]}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"âœ•"})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"HTML Output:"}),e.jsx("textarea",{readOnly:!0,value:g,className:"w-full h-48 p-2 font-mono text-sm border rounded dark:bg-gray-900 dark:border-gray-600"}),e.jsx("label",{className:"block text-sm font-medium mt-4 mb-2",children:"Preview:"}),e.jsx("div",{className:"p-3 border rounded bg-gray-50 dark:bg-gray-900 dark:border-gray-600 prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:g}})]}),e.jsxs("div",{className:"p-4 border-t dark:border-gray-700 flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 rounded border dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:q,className:`px-4 py-2 rounded ${v?"bg-green-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:v?"âœ“ Copied!":"Copy HTML"}),v&&e.jsx("button",{onClick:Q,className:"px-4 py-2 rounded bg-amber-500 hover:bg-amber-600 text-white",children:"Mark as Digested"})]})]})}),M&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg",children:[M,e.jsx("button",{onClick:()=>A(null),className:"ml-2",children:"âœ•"})]})]})}const Ct="YourNewPassword",z="linkBlogData",X=120,he={DATE_DESC:"date-desc",DATE_ASC:"date-asc",TITLE:"title"};function Lt(){var Ie;const[o,m]=r.useState([]),[n,l]=r.useState({url:"",source:"",pullQuote:"",tags:[],tagInput:""}),[h,f]=r.useState(!1),[w,p]=r.useState(""),[g,k]=r.useState([]),[v,T]=r.useState(he.DATE_DESC),[M,A]=r.useState(new Set),[j,D]=r.useState(null),[q,Q]=r.useState(!1),[E,S]=r.useState(""),[_,J]=r.useState(!1),[ee,U]=r.useState(null),[R,C]=r.useState(-1),[V,F]=r.useState(!1),[N,$]=r.useState(""),[te,B]=r.useState(0),[se,u]=r.useState(!1),[b,O]=r.useState(!1),[G,K]=r.useState([]),[ne,Je]=r.useState(new Set),[It,At]=r.useState(!1),[ke,oe]=r.useState(!1),[ie,ge]=r.useState(null),[je,le]=r.useState(null),[ce,fe]=r.useState(!1),Ne=r.useRef(null),xe=r.useRef(null),He=r.useRef(null),ze=r.useRef({}),Se=r.useRef(null),de=r.useDeferredValue(w),we=r.useDeferredValue(g),Ve=w!==de,Ce=r.useCallback(async()=>{var a,s;try{console.log("Loading links from storage...");const i=await fetch("/data/links.json?t="+Date.now());if(i.ok){const d=await i.json();console.log("Loaded JSON data:",d);const y=localStorage.getItem(z);let c=null;if(y&&(c=JSON.parse(y)),c&&c.lastUpdated&&d.lastUpdated){const I=new Date(d.lastUpdated).getTime(),Y=new Date(c.lastUpdated).getTime(),P=((a=c.links)==null?void 0:a.length)||0,x=((s=d.links)==null?void 0:s.length)||0;Y>I?(m(c.links||[]),P>x&&le({message:`Browser has ${P-x} more links than server. Save to sync.`,localCount:P,jsonCount:x,localTime:new Date(c.lastUpdated).toLocaleString(),jsonTime:new Date(d.lastUpdated).toLocaleString()})):P>x?window.confirm(`âš ï¸ Data Conflict Detected!

Browser: ${P} links (${new Date(c.lastUpdated).toLocaleString()})
Server: ${x} links (${new Date(d.lastUpdated).toLocaleString()})

Your browser has ${P-x} more links.

Click OK to keep browser data (recommended)
Click Cancel to use server data (will lose browser-only links)`)?(m(c.links||[]),le({message:`Using browser data. Save to sync ${P-x} links to server.`,localCount:P,jsonCount:x})):(m(d.links||[]),localStorage.setItem(z,JSON.stringify(d))):(m(d.links||[]),localStorage.setItem(z,JSON.stringify(d)))}else m(d.links||[]),localStorage.setItem(z,JSON.stringify(d));return}}catch(i){console.warn("Could not load from JSON, falling back to localStorage:",i)}const t=localStorage.getItem(z);if(t){const i=JSON.parse(t);m(i.links||[])}},[]),H=r.useCallback(async t=>{const a={links:t,lastUpdated:new Date().toISOString()};localStorage.setItem(z,JSON.stringify(a));const s=!["localhost","127.0.0.1","newsfeeds.net"].some(i=>window.location.hostname.includes(i));try{if(!(await fetch("http://127.0.0.1:3001/api/save-links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to save to server");ge(null),le(null),console.log(`âœ… Saved ${t.length} links to server`)}catch(i){console.error("Could not save to server:",i),s?console.log("âœ“ Changes saved to browser localStorage (server sync not available on static hosting)"):ge({message:`Save failed! ${t.length} links saved to browser only.`,details:"API server not responding. Start it with: npm run dev:save",timestamp:new Date().toLocaleTimeString()})}},[]),We=r.useCallback(async()=>{try{const t=await kt();K(t)}catch(t){console.error("Error loading archive metadata:",t)}},[]),Le=r.useCallback(async t=>{if(!ne.has(t))try{const a=await jt(t);m(s=>[...s,...a]),Je(s=>new Set([...s,t])),console.log(`Loaded ${a.length} links from ${t} archive`)}catch(a){console.error(`Error loading archive ${t}:`,a)}},[ne]),Te=r.useCallback(async()=>{for(const t of G)await Le(t.year)},[G,Le]),be=r.useCallback(()=>{var a;const t=localStorage.getItem(z);if(t){const s={...JSON.parse(t),backupTimestamp:new Date().toISOString()};localStorage.setItem(`${z}_backup`,JSON.stringify(s)),console.log(`ðŸ”„ Auto-backup: ${((a=s.links)==null?void 0:a.length)||0} links backed up at ${new Date().toLocaleTimeString()}`)}},[]);r.useEffect(()=>{if(!["localhost","127.0.0.1","newsfeeds.net"].some(s=>window.location.hostname.includes(s)))return;const a=setTimeout(()=>{be()},3e4);return xe.current=setInterval(()=>{be()},300*1e3),()=>{clearTimeout(a),xe.current&&clearInterval(xe.current)}},[be]),r.useEffect(()=>{Ce(),We();const t=new URLSearchParams(window.location.search),a=t.get("admin"),s=a?a.replace(/[?&#\s]+$/,""):"";f(s===Ct);const i=t.get("tag");i&&k([i])},[Ce]),r.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("admin"),s=new URLSearchParams;a&&s.set("admin",a),g.length===1&&s.set("tag",g[0]);const i=s.toString()?`?${s.toString()}`:window.location.pathname;window.history.replaceState({},"",i)},[g]);const Ee=async t=>{var a,s;try{const i=await fetch(`https://api.microlink.io/?url=${encodeURIComponent(t)}`);if(!i.ok)throw new Error("Failed to fetch metadata");const d=await i.json();if(d.status==="success"&&d.data)return{title:d.data.title||"",description:d.data.description||"",image:((a=d.data.image)==null?void 0:a.url)||"",favicon:((s=d.data.logo)==null?void 0:s.url)||""}}catch(i){console.error("Error fetching metadata:",i)}try{return{title:new URL(t).hostname.replace("www.",""),description:"",image:"",favicon:""}}catch(i){return console.error("Invalid URL:",t,i),{title:t,description:"",image:"",favicon:""}}},Ye=async()=>{var d;if(!n.url||!n.source)return;if(n.source.length>X){alert(`Title must be less than ${X} characters`);return}const t=N.trim().toLowerCase(),a=t&&!((d=n.tags)!=null&&d.includes(t))?[...n.tags||[],t]:n.tags||[],s={id:Date.now(),url:n.url,source:n.source,pullQuote:n.pullQuote||"",tags:a,isPinned:n.isPinned||!1,timestamp:new Date().toISOString(),visits:0},i=[...o,s];try{await H(i),l({url:"",source:"",pullQuote:"",tags:[],tagInput:"",isPinned:!1}),$(""),j&&D(null)}catch(y){console.error("Failed to add link:",y)}},Ge=async()=>{var d;if(!j||!h)return;const t=N.trim().toLowerCase(),a=t&&!((d=n.tags)!=null&&d.includes(t))?[...n.tags||[],t]:n.tags||[],s={id:j.id,url:n.url,source:n.source,pullQuote:n.pullQuote||"",tags:a,isPinned:n.isPinned||!1,timestamp:j.timestamp,visits:j.visits||0},i=o.map(y=>y.id===j.id?s:y);try{await H(i),D(null),l({url:"",source:"",pullQuote:"",tags:[],tagInput:"",isPinned:!1}),$("")}catch(y){console.error("Failed to update link:",y)}},Ke=r.useCallback(t=>{h&&(D(t),l({...t,pullQuote:t.pullQuote||"",tags:t.tags||[],tagInput:""}),$(""),Q(!1),window.scrollTo({top:0,behavior:"smooth"}))},[h]),Ze=async t=>{if(!confirm("Delete this link?"))return;const a=o.filter(s=>s.id!==t);m(a),await H(a)},Xe=async t=>{const a=o.map(s=>s.id===t?{...s,isPinned:!s.isPinned}:s);m(a),await H(a)},et=()=>{try{const t=new Date().toISOString().replace(/[:.]/g,"-").split("T"),a=t[0],s=t[1].split("-").slice(0,2).join("-"),i=JSON.stringify({links:o,lastUpdated:new Date().toISOString(),exportedAt:new Date().toISOString(),totalLinks:o.length},null,2),d=new Blob([i],{type:"application/json"}),y=URL.createObjectURL(d),c=document.createElement("a");c.href=y,c.download=`link-blog-export-${a}-${s}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(y),console.log(`âœ… Exported ${o.length} links`)}catch(t){console.error("âŒ Export failed:",t),alert("Export failed. Please try again or check the console for details.")}},tt=t=>{const a=t.target.files[0];if(!a)return;console.log("ðŸ“¥ Starting import of",a.name);const s=new FileReader;s.onload=async i=>{try{const d=JSON.parse(i.target.result);if(!d.links||!Array.isArray(d.links))throw new Error('Invalid file format. Expected JSON with "links" array.');console.log(`ðŸ“Š File contains ${d.links.length} links`);const y=new Set(o.map(x=>x.url)),c=d.links.filter(x=>!x.url||!x.source?!1:!y.has(x.url)).map(x=>({...x,id:x.id||Date.now()+Math.random(),timestamp:x.timestamp||new Date().toISOString(),visits:x.visits||0,tags:Array.isArray(x.tags)?x.tags:[],isPinned:!!x.isPinned})),I=d.links.length-c.length,Y=c.length>0?`Import ${c.length} new links?${I>0?` (${I} duplicates will be skipped)`:""}`:`No new links to import (${I} duplicates found)`;if(c.length===0){alert(Y),console.log("â„¹ï¸",Y);return}if(window.confirm(Y)){const x=[...o,...c];try{m(x),await H(x);const ae=`âœ… Successfully imported ${c.length} links!`;console.log(ae),alert(ae)}catch(ae){console.error("âŒ Failed to save imported links:",ae),m(x),alert(`âš ï¸ Imported ${c.length} links to UI, but save failed. Check if API server is running.`)}}}catch(d){console.error("âŒ Import failed:",d),alert(`Import failed: ${d.message}`)}},s.onerror=()=>{console.error("âŒ File reading failed"),alert("Failed to read the file. Please try again.")},s.readAsText(a),t.target.value=""},st=r.useCallback(async t=>{const a=t.split(`
`).map(i=>i.trim()).filter(i=>i),s=[];for(const i of a){const d=await Ee(i),y=Fe(i,d.title,d.description);s.push({url:i,source:(d.title||i).slice(0,X),pullQuote:"",tags:y.slice(0,5),metadata:d})}return s},[]),at=async()=>{if(E.trim()){J(!0);try{const s=[...(await st(E)).map(i=>({id:Date.now()+Math.random(),url:i.url,source:i.source,pullQuote:i.pullQuote||"",tags:i.tags,timestamp:new Date().toISOString(),visits:0})),...o];m(s),await H(s),S(""),Q(!1)}catch(t){console.error("Failed to add links:",t),alert("Failed to add some links")}finally{J(!1)}}},rt=async t=>{try{await navigator.clipboard.writeText(t.url),U(t.id),setTimeout(()=>U(null),2e3)}catch(a){console.error("Failed to copy:",a)}},ue=r.useMemo(()=>{const t={};return o.forEach(a=>{(a.tags||[]).forEach(s=>{t[s]=(t[s]||0)+1})}),Object.entries(t).sort((a,s)=>s[1]-a[1]).map(([a,s])=>({tag:a,count:s}))},[o]),W=r.useMemo(()=>{if(!N.trim())return[];const t=N.trim().toLowerCase(),a=(n.tags||[]).map(s=>s.toLowerCase());return ue.filter(({tag:s})=>s.toLowerCase().startsWith(t)&&!a.includes(s.toLowerCase())).slice(0,8)},[N,ue,n.tags]),Z=r.useMemo(()=>{let t=o;if(de){const a=de.toLowerCase();t=t.filter(s=>s.source.toLowerCase().includes(a)||s.url.toLowerCase().includes(a)||s.pullQuote&&s.pullQuote.toLowerCase().includes(a)||s.tags&&s.tags.some(i=>i.toLowerCase().includes(a)))}return we.length>0&&(t=t.filter(a=>a.tags&&we.every(s=>a.tags.includes(s)))),[...t].sort((a,s)=>{if(a.isPinned!==s.isPinned)return s.isPinned?1:-1;switch(v){case he.DATE_ASC:return new Date(a.timestamp||0)-new Date(s.timestamp||0);case he.TITLE:return a.source.localeCompare(s.source);case he.DATE_DESC:default:return new Date(s.timestamp||0)-new Date(a.timestamp||0)}})},[o,de,we,v]);return e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[ie&&e.jsx("div",{className:"sticky top-0 z-50 bg-red-600 text-white px-4 py-3 shadow-lg",children:e.jsxs("div",{className:"container-width flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:ie.message}),e.jsx("p",{className:"text-sm text-red-100",children:ie.details})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-red-200",children:ie.timestamp}),e.jsx("button",{onClick:()=>ge(null),className:"p-1 hover:bg-red-700 rounded",title:"Dismiss",children:e.jsx(pe,{className:"w-4 h-4"})})]})]})}),je&&e.jsx("div",{className:"sticky top-0 z-50 bg-amber-500 text-amber-950 px-4 py-3 shadow-lg",children:e.jsxs("div",{className:"container-width flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:je.message})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{H(o)},className:"px-3 py-1 bg-amber-700 text-white rounded text-sm font-medium hover:bg-amber-800",children:"Sync Now"}),e.jsx("button",{onClick:()=>le(null),className:"p-1 hover:bg-amber-600 rounded",title:"Dismiss",children:e.jsx(pe,{className:"w-4 h-4"})})]})]})}),(!b||h)&&e.jsxs("header",{className:"sticky top-0 z-20 bg-white",style:{maxHeight:"120px"},children:[e.jsx("div",{className:"bg-neutral-50 border-b border-neutral-200",children:e.jsxs("div",{className:"container-width flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-[11px] text-neutral-400 uppercase tracking-wide",children:"Est. 1994"}),e.jsx("time",{className:"text-[11px] text-neutral-400 uppercase tracking-wide",dateTime:new Date().toISOString(),children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),e.jsx("div",{className:"container-width py-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-2 md:gap-0",children:[e.jsx("a",{href:"https://mediaeater.com",target:"_blank",rel:"noopener noreferrer",className:"md:hidden hover:opacity-80 transition-opacity",title:"mediaeater.com",children:e.jsx("img",{src:"https://mediaeater.com/Images/mediaeater.png",alt:"mediaeater",className:"w-10 h-10 object-contain"})}),e.jsxs("h1",{className:"flex items-center gap-2",children:[e.jsx("a",{href:"https://mediaeater.com",target:"_blank",rel:"noopener noreferrer",className:"hidden md:block hover:opacity-80 transition-opacity",title:"mediaeater.com",children:e.jsx("img",{src:"https://mediaeater.com/Images/mediaeater.png",alt:"mediaeater",className:"h-8 w-8 object-contain"})}),e.jsx("a",{href:"/",className:"text-2xl md:text-3xl font-medium text-neutral-900 hover:text-neutral-600 transition-colors",style:{fontFamily:"'JetBrains Mono', monospace"},children:"newsfeeds.net"})]}),e.jsx("div",{className:"text-[10px] md:text-[11px] uppercase text-amber-700 mt-1 md:mt-0 md:ml-0",style:{letterSpacing:"0.2em",fontFamily:"'Inter', sans-serif"},children:"Human Edited & Curated"})]})}),e.jsx("nav",{className:"border-t border-neutral-200",children:e.jsxs("div",{className:"container-width",children:[e.jsxs("ul",{className:"hidden md:flex items-center justify-center py-2 text-sm text-neutral-600",style:{fontFamily:"'Inter', sans-serif"},children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>O(!b),className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",title:b?"Show full view":"Show minimal view",children:[Z.length,":",o.length]})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>u(!se),className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",title:"Toggle legend",children:"Legend"})}),e.jsx("li",{children:e.jsx("a",{href:"/feed.xml",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",children:"RSS"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>{var t;Te(),(t=document.getElementById("archives-section"))==null||t.scrollIntoView({behavior:"smooth"})},className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",children:"Archive"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>fe(t=>!t),className:`px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors ${ce?"text-neutral-900 font-medium":""}`,children:ce?"Ticker â—":"Ticker"})}),e.jsx("li",{children:e.jsx("a",{href:"https://ghuneim.com",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",children:"mediaeater.inc"})}),e.jsx("li",{children:ke?e.jsx("input",{ref:Ne,type:"text",value:w,onChange:t=>p(t.target.value),onBlur:()=>{w||setTimeout(()=>oe(!1),150)},placeholder:"Search...",className:`w-32 px-2 py-1 text-sm border border-neutral-300 rounded focus:outline-none focus:border-neutral-500 ${Ve?"opacity-70":""}`,"aria-label":"Search links",autoFocus:!0}):e.jsxs("button",{onClick:()=>oe(!0),className:"px-3 flex items-center gap-1.5 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors","aria-label":"Open search",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Search"})]})})]}),e.jsx("div",{className:"md:hidden overflow-x-auto scrollbar-hide",children:e.jsxs("ul",{className:"flex items-center py-2 text-sm text-neutral-600 whitespace-nowrap",style:{fontFamily:"'Inter', sans-serif"},children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>O(!b),className:"px-3 hover:text-neutral-900 transition-colors",children:[Z.length,":",o.length]})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>u(!se),className:"px-3 hover:text-neutral-900 transition-colors",children:"Legend"})}),e.jsx("li",{children:e.jsx("a",{href:"/feed.xml",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 transition-colors",children:"RSS"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>{var t;Te(),(t=document.getElementById("archives-section"))==null||t.scrollIntoView({behavior:"smooth"})},className:"px-3 hover:text-neutral-900 transition-colors",children:"Archive"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>fe(t=>!t),className:`px-3 hover:text-neutral-900 transition-colors ${ce?"font-medium":""}`,children:"Ticker"})}),e.jsx("li",{children:e.jsx("a",{href:"https://ghuneim.com",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 transition-colors",children:"mediaeater.inc"})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>oe(!0),className:"px-3 flex items-center gap-1.5 hover:text-neutral-900 transition-colors",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Search"})]})})]})}),ke&&e.jsx("div",{className:"md:hidden pb-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),e.jsx("input",{ref:Ne,type:"text",value:w,onChange:t=>p(t.target.value),onBlur:()=>{w||setTimeout(()=>oe(!1),150)},placeholder:"Search links...",className:"w-full pl-10 pr-4 py-2 text-sm border border-neutral-300 rounded focus:outline-none focus:border-neutral-500","aria-label":"Search links",autoFocus:!0})]})})]})}),e.jsx("div",{className:"border-b border-neutral-300"})]}),h&&e.jsx("div",{className:"bg-white border-b border-neutral-200",children:e.jsxs("div",{className:"container-width py-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>Q(!1),className:`btn btn-sm ${q?"btn-ghost":"btn-primary"}`,children:[j?e.jsx($e,{className:"w-4 h-4 mr-2"}):e.jsx(bt,{className:"w-4 h-4 mr-2"}),j?"Edit Link":"Add Single Link"]}),e.jsxs("button",{onClick:()=>{Q(!0),D(null)},className:`btn btn-sm ${q?"btn-primary":"btn-ghost"}`,children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Bulk Add URLs"]}),e.jsxs("button",{onClick:et,className:"btn btn-sm btn-outline",title:`Export all ${o.length} links to JSON file`,children:[e.jsx(gt,{className:"w-4 h-4 mr-2"}),"Export (",o.length,")"]}),e.jsxs("label",{className:"btn btn-sm btn-outline cursor-pointer",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Import",e.jsx("input",{type:"file",accept:".json",onChange:tt,className:"hidden",title:"Import links from JSON file"})]}),e.jsx(St,{})]}),!q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL"}),e.jsx("input",{type:"url",placeholder:"https://example.com",value:n.url,onChange:t=>l({...n,url:t.target.value}),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Title (",n.source.length,"/",X,")"]}),e.jsx("input",{type:"text",placeholder:"Link title or description",value:n.source,onChange:t=>l({...n,source:t.target.value}),maxLength:X,className:"input w-full"})]})]}),n.url&&(!n.source||n.tags.length===0)&&e.jsxs("button",{onClick:async()=>{const t=await Ee(n.url),a=Fe(n.url,t.title,t.description);l(s=>{const i=s.tags.length===0?a.slice(0,5):s.tags;return{...s,source:s.source||(t.title||n.url).slice(0,X),tags:i,tagInput:i.join(", ")}})},className:"btn btn-sm btn-secondary",children:[e.jsx(ft,{className:"w-3 h-3 mr-1"}),"Auto-fetch title & tags"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pull Quote (optional)"}),e.jsx("textarea",{placeholder:"Interesting quote or note about this link...",value:n.pullQuote||"",onChange:t=>l({...n,pullQuote:t.target.value}),className:"input w-full h-20"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Tags ",e.jsx("span",{className:"text-neutral-400 font-normal",children:"(Tab to add suggestion)"})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:(n.tags||[]).map((t,a)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-md",children:[t,e.jsx("button",{type:"button",onClick:()=>{const s=n.tags.filter((i,d)=>d!==a);l({...n,tags:s,tagInput:""})},className:"text-blue-600 hover:text-blue-900 ml-0.5","aria-label":`Remove ${t}`,children:e.jsx(pe,{className:"w-3 h-3"})})]},`${t}-${a}`))}),e.jsx("input",{ref:Se,type:"text",placeholder:(Ie=n.tags)!=null&&Ie.length?"Add another tag...":"Type to add tags...",value:N,onChange:t=>{var s;const a=t.target.value;if(a.endsWith(",")){const i=a.slice(0,-1).trim().toLowerCase();i&&!((s=n.tags)!=null&&s.includes(i))&&l({...n,tags:[...n.tags||[],i],tagInput:""}),$(""),F(!1),B(0);return}$(a),F(a.trim().length>0),B(0)},onFocus:()=>{N.trim().length>0&&F(!0)},onBlur:()=>{setTimeout(()=>{var a;const t=N.trim().toLowerCase();t&&!((a=n.tags)!=null&&a.includes(t))&&l({...n,tags:[...n.tags||[],t],tagInput:""}),$(""),F(!1)},200)},onKeyDown:t=>{var a,s,i,d,y;if(t.key==="Escape"){F(!1);return}if(t.key==="Tab"&&N.trim()){t.preventDefault();let c;V&&W.length>0?c=(a=W[te])==null?void 0:a.tag:c=N.trim().toLowerCase(),c&&!((s=n.tags)!=null&&s.includes(c))&&l({...n,tags:[...n.tags||[],c],tagInput:""}),$(""),F(!1),B(0);return}if(t.key==="Enter"){t.preventDefault();let c;V&&W.length>0?c=(i=W[te])==null?void 0:i.tag:c=N.trim().toLowerCase(),c&&!((d=n.tags)!=null&&d.includes(c))&&l({...n,tags:[...n.tags||[],c],tagInput:""}),$(""),F(!1),B(0);return}if(t.key==="ArrowDown"&&V){t.preventDefault(),B(c=>Math.min(c+1,W.length-1));return}if(t.key==="ArrowUp"&&V){t.preventDefault(),B(c=>Math.max(c-1,0));return}if(t.key==="Backspace"&&!N&&((y=n.tags)==null?void 0:y.length)>0){const c=n.tags.slice(0,-1);l({...n,tags:c,tagInput:""})}},className:"input w-full"}),V&&W.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-blue-500 rounded-md shadow-lg max-h-48 overflow-y-auto",children:W.map(({tag:t,count:a},s)=>e.jsxs("button",{type:"button",onMouseDown:i=>{var d,y;i.preventDefault(),(d=n.tags)!=null&&d.includes(t)||l({...n,tags:[...n.tags||[],t],tagInput:""}),$(""),F(!1),B(0),(y=Se.current)==null||y.focus()},className:`w-full text-left px-3 py-2 text-sm transition-colors flex items-center justify-between border-b border-gray-100 last:border-b-0 ${s===te?"bg-blue-100 text-blue-900":"hover:bg-blue-50"}`,children:[e.jsx("span",{className:"font-medium",children:t}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:a})]},t))}),ue.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-neutral-500",children:"Popular:"}),ue.slice(0,10).map(({tag:t})=>{var a,s;return e.jsx("button",{type:"button",onClick:()=>{var i;(i=n.tags)!=null&&i.includes(t)||l({...n,tags:[...n.tags||[],t],tagInput:""})},disabled:(a=n.tags)==null?void 0:a.includes(t),className:`tag text-xs ${(s=n.tags)!=null&&s.includes(t)?"opacity-40 cursor-not-allowed":""}`,children:t},t)})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.isPinned||!1,onChange:t=>l({...n,isPinned:t.target.checked}),className:"rounded border-neutral-300"}),e.jsx("span",{className:"text-sm",children:"Pin to top"})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[j&&e.jsx("button",{onClick:()=>{D(null),l({url:"",source:"",pullQuote:"",tags:[],tagInput:"",isPinned:!1})},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:j?Ge:Ye,disabled:!n.url||!n.source,className:"btn btn-primary",children:j?"Update Link":"Add Link"})]})]})]}),q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Add Multiple URLs (one per line)"}),e.jsx("textarea",{ref:He,value:E,onChange:t=>S(t.target.value),placeholder:"Paste URLs here...",className:"input w-full h-32 font-mono text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:at,disabled:!E.trim()||_,className:"btn btn-primary",children:_?"Processing...":"Add All Links"}),e.jsx("button",{onClick:()=>{Q(!1),S("")},className:"btn btn-secondary",children:"Cancel"})]})]})]})}),e.jsx("main",{className:"container-width section-y",children:e.jsxs("div",{className:"space-y-3",children:[!b&&se&&e.jsx("div",{className:"legend-box mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Title:"})," Source/article name"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"URL:"})," Domain shown below title"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Quote:"})," Pull quote or excerpt"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Tags:"})," Click to filter or bookmark a topic"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Date:"})," When link was added"]})]})}),Z.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-neutral-500",children:"No links found"})}):Z.map((t,a)=>{const s=new Date(t.timestamp).getFullYear(),i=Z[a-1],d=i?new Date(i.timestamp).getFullYear():null,y=d!==null&&s!==d;return e.jsxs(r.Fragment,{children:[y&&e.jsx("div",{id:"archives-section",className:"py-4 mt-6 mb-2 border-t-2 border-neutral-300",children:e.jsx("h2",{className:"text-xl font-bold text-neutral-700",children:s})}),e.jsx("article",{ref:c=>ze.current[a]=c,className:`link-card group ${R===a?"ring-2 ring-primary-500 ring-offset-2":""}`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[t.isPinned&&e.jsx(Oe,{className:"w-4 h-4 text-neutral-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-neutral-900 truncate",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary-600 transition-colors",onClick:()=>{if(h){const c=o.map(I=>I.id===t.id?{...I,visits:(I.visits||0)+1}:I);m(c),H(c)}},children:t.source})}),e.jsx("p",{className:"text-sm text-neutral-500 truncate",children:(()=>{try{return new URL(t.url).hostname.replace("www.","")}catch{return t.url}})()})]})]}),t.pullQuote&&e.jsx("div",{className:"mt-2 text-sm text-neutral-600 italic space-y-2",children:t.pullQuote.split(`

`).map((c,I)=>e.jsx("p",{children:c.split(`
`).map((Y,P,x)=>e.jsxs("span",{children:[Y,P<x.length-1&&e.jsx("br",{})]},P))},I))}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:t.tags.map(c=>e.jsx("button",{onClick:()=>{g.includes(c)?k(g.filter(I=>I!==c)):k([...g,c])},className:"tag",children:c},c))}),e.jsx("div",{className:"mt-3 flex items-center gap-4 text-xs text-neutral-400",children:e.jsxs("span",{children:[new Date(t.timestamp).toLocaleDateString(),t.visits>0&&` [${t.visits}]`]})})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>rt(t),className:"btn-ghost p-2",title:"Copy link",children:ee===t.id?e.jsx(ht,{className:"w-4 h-4 text-success"}):e.jsx(pt,{className:"w-4 h-4"})}),h&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Ke(t),className:"btn-ghost p-2",title:"Edit link",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Xe(t.id),className:"btn-ghost p-2",title:"Pin link",children:e.jsx(Oe,{className:`w-4 h-4 ${t.isPinned?"fill-current":""}`})}),e.jsx("button",{onClick:()=>Ze(t.id),className:"btn-ghost p-2 text-error",title:"Delete link",children:e.jsx(vt,{className:"w-4 h-4"})})]})]})]})})]},t.id)})]})}),e.jsx(Nt,{links:Z,forceShow:ce,onClose:()=>fe(!1)})]})}class Tt extends r.Component{constructor(m){super(m),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(m){return{hasError:!0}}componentDidCatch(m,n){console.error("Error caught by boundary:",m),console.error("Error info:",n),this.setState({error:m,errorInfo:n})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",fontFamily:"monospace"},children:[e.jsx("h2",{style:{color:"red"},children:"Something went wrong!"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[e.jsx("summary",{children:"Click to see error details"}),e.jsx("p",{style:{color:"red"},children:this.state.error&&this.state.error.toString()}),e.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}):this.props.children}}function Et(){return e.jsx(Tt,{children:e.jsx(Lt,{})})}ct.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(Et,{})}));
//# sourceMappingURL=index-BnQS6Ut6.js.map
