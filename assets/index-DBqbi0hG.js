import{r as Ue,a as et}from"./vendor-BRnhmgIC.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const w of m)if(w.type==="childList")for(const f of w.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function r(m){const w={};return m.integrity&&(w.integrity=m.integrity),m.referrerPolicy&&(w.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?w.credentials="include":m.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function u(m){if(m.ep)return;m.ep=!0;const w=r(m);fetch(m.href,w)}})();var we={exports:{}},se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te;function tt(){if(Te)return se;Te=1;var o=Ue(),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,m=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function f(v,g,D){var k,b={},C=null,L=null;D!==void 0&&(C=""+D),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(L=g.ref);for(k in g)u.call(g,k)&&!w.hasOwnProperty(k)&&(b[k]=g[k]);if(v&&v.defaultProps)for(k in g=v.defaultProps,g)b[k]===void 0&&(b[k]=g[k]);return{$$typeof:i,type:v,key:C,ref:L,props:b,_owner:m.current}}return se.Fragment=r,se.jsx=f,se.jsxs=f,se}var Ie;function st(){return Ie||(Ie=1,we.exports=tt()),we.exports}var e=st(),n=Ue(),de={},Ee;function at(){if(Ee)return de;Ee=1;var o=et();return de.createRoot=o.createRoot,de.hydrateRoot=o.hydrateRoot,de}var rt=at(),nt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ot=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lt=(o,i)=>{const r=n.forwardRef(({color:u="currentColor",size:m=24,strokeWidth:w=2,absoluteStrokeWidth:f,children:v,...g},D)=>n.createElement("svg",{ref:D,...nt,width:m,height:m,stroke:u,strokeWidth:f?Number(w)*24/Number(m):w,className:`lucide lucide-${ot(o)}`,...g},[...i.map(([k,b])=>n.createElement(k,b)),...(Array.isArray(v)?v:[v])||[]]));return r.displayName=`${o}`,r};var T=lt;const Pe=T("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),it=T("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ct=T("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),dt=T("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ut=T("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),mt=T("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),De=T("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Ae=T("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),ht=T("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),pt=T("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ye=T("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),gt=T("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),ft=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Re=T("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),me=T("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$e={"github.com":["github","open-source","code"],"stackoverflow.com":["stackoverflow","programming","help"],"medium.com":["article","blog","medium"],"dev.to":["article","blog","dev-community"],"youtube.com":["video","youtube"],"twitter.com":["twitter","social-media"],"linkedin.com":["linkedin","professional","business"],"reddit.com":["reddit","discussion","community"],"hackernews.com":["hackernews","tech-news"],"news.ycombinator.com":["hackernews","tech-news"],"techcrunch.com":["news","tech-news","startup"],"wired.com":["news","technology"],"arstechnica.com":["news","technology"],"theverge.com":["news","technology"],"smashingmagazine.com":["web-development","design","tutorial"],"css-tricks.com":["css","web-development","tutorial"],"codepen.io":["frontend","css","javascript","demo"],"dribbble.com":["design","inspiration","ui"],"behance.net":["design","portfolio","creative"],"figma.com":["design","tools","ui"],"notion.so":["productivity","tools","workspace"],"vercel.com":["deployment","frontend","tools"],"netlify.com":["deployment","frontend","tools"],"aws.amazon.com":["aws","cloud","infrastructure"],"cloud.google.com":["gcp","cloud","infrastructure"],"azure.microsoft.com":["azure","cloud","microsoft"],"docker.com":["docker","containers","devops"],"kubernetes.io":["kubernetes","containers","devops"],"npmjs.com":["npm","javascript","package"],"pypi.org":["python","package","pip"]},xt=new Set(["a","an","the","and","or","but","in","on","at","to","for","of","with","by","from","as","is","was","are","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","shall","must","it","its","he","she","they","we","you","i","me","my","his","her","their","our","your","this","that","these","those","what","which","who","whom","how","when","where","why","not","no","nor","so","if","then","than","too","very","just","about","up","out","into","over","after","before","between","under","again","further","once","here","there","all","each","every","both","few","more","most","other","some","such","only","own","same","also","any","many","new","old","first","last","long","great","little","right","big","high","small","large","next","early","young","way","via","get","got","go","goes","gone","come","came","make","made","take","took","give","gave","say","said","know","think","see","look","find","use","used","using","tell","show","try","leave","call","keep","let","begin","seem","help","set","put","read","run","move","live","back","still","well","even","now","much","need","want","like","part","turn","start","hand","while","through","during","without","within","along","against","since","until","among","wide","array","personal","data","day","full","real","based","index","page","home","site","web","www","http","https","com","org","net","html","portfolio","welcome","about"]);function Oe(o){return o?o.toLowerCase().replace(/['']/g,"").replace(/[^a-z0-9\s-]/g," ").split(/\s+/).map(i=>i.replace(/^-+|-+$/g,"")).filter(i=>i.length>=3&&!xt.has(i)).filter(i=>!/^\d[\d-]*$/.test(i)).filter((i,r,u)=>u.indexOf(i)===r):[]}function Me(o,i="",r=""){const u=[],m=Oe(i);u.push(...m);const w=Oe(r);for(const f of w)u.includes(f)||u.push(f);try{const v=new URL(o).hostname.toLowerCase().replace(/^www\./,"");if($e[v])for(const g of $e[v])u.includes(g)||u.push(g)}catch{}return u.slice(0,8)}const wt=async()=>{var o;try{{const i=[2025,2024,2023,2022,2021,2020],r=[];for(const u of i)try{const m=await fetch(`/data/archive/${u}.json?${Date.now()}`);if(m.ok){const w=await m.json();r.push({year:u,count:((o=w.links)==null?void 0:o.length)||0})}}catch{}return r}}catch(i){return console.error("Error loading archive metadata:",i),[]}},yt=async o=>{try{{const i=await fetch(`/data/archive/${o}.json?${Date.now()}`);if(!i.ok)throw new Error(`Failed to load archive for ${o}`);return(await i.json()).links||[]}}catch(i){return console.error(`Error loading archive for ${o}:`,i),[]}};function bt({links:o=[],forceShow:i=!1,onClose:r}){const[u,m]=n.useState(!1),[,w]=n.useState(!1),[f,v]=n.useState(0),[g,D]=n.useState(!1),[k,b]=n.useState(!1),[C,L]=n.useState(!1),[I,U]=n.useState(!0),[q,V]=n.useState(25),E=n.useRef(null),P=n.useRef(null),$=n.useRef(null),G=n.useRef(null),A=i,S=n.useMemo(()=>o.filter(h=>h.pullQuote&&h.pullQuote.trim().length>0),[o]),x=S[f]||o[f]||null,M=h=>h?new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Z=h=>{if(!h)return"";try{return new URL(h).hostname.replace(/^www\./,"")}catch{return""}},R=n.useCallback(()=>{const h=S.length>0?S:o;h.length!==0&&(L(!0),setTimeout(()=>{v(j=>(j+1)%h.length),L(!1)},1e3))},[S,o]);n.useEffect(()=>{G.current=R},[R]),n.useEffect(()=>{if(!A||u||C||(S.length>0?S:o).length===0)return;const j=setInterval(()=>{G.current&&G.current()},32e3);return()=>clearInterval(j)},[A,u,C,S.length,o.length]),n.useEffect(()=>{const h=()=>{const ee=window.matchMedia("(orientation: landscape)").matches,J=window.matchMedia("(max-width: 768px)").matches;w(ee&&J)};h();const j=window.matchMedia("(orientation: landscape)"),_=window.matchMedia("(max-width: 768px)");return j.addEventListener("change",h),_.addEventListener("change",h),()=>{j.removeEventListener("change",h),_.removeEventListener("change",h)}},[]),n.useEffect(()=>{const h=window.matchMedia("(prefers-reduced-motion: reduce)");D(h.matches);const j=_=>D(_.matches);return h.addEventListener("change",j),()=>h.removeEventListener("change",j)},[]),n.useEffect(()=>{g&&m(!0)},[g]),n.useEffect(()=>{const j=setTimeout(()=>{if(E.current&&P.current){const _=E.current.scrollHeight,ee=P.current.clientHeight,J=_-ee;if(J>20){b(!0);const W=Math.max(15,Math.min(60,J/40));V(W)}else b(!1)}},100);return()=>clearTimeout(j)},[f,x]),n.useEffect(()=>A?(I&&(()=>{$.current&&clearTimeout($.current),$.current=setTimeout(()=>{U(!1)},3e3)})(),()=>{$.current&&clearTimeout($.current)}):void 0,[A,I]);const X=n.useCallback(h=>{h.target.closest(".ticker-control")||U(!0)},[]);n.useEffect(()=>{if(!A)return;const h=j=>{j.target.tagName!=="INPUT"&&(j.key===" "?(j.preventDefault(),m(_=>!_)):(j.key==="ArrowRight"||j.key==="n")&&R())};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[A,R]);const ae=()=>{m(h=>!h)},B=()=>{x!=null&&x.url&&window.open(x.url,"_blank","noopener,noreferrer")};if(!A||!x&&o.length===0||!x)return null;const re=S.length>0?S:o;return e.jsxs("div",{className:"ticker-container",role:"region","aria-live":"polite","aria-label":"News ticker",onClick:X,children:[e.jsxs("div",{className:`ticker-card ${C?"ticker-fade-out":""}`,onClick:B,children:[e.jsxs("div",{className:"ticker-headline",children:[e.jsx("span",{className:"ticker-source",children:x.source}),e.jsx("span",{className:"ticker-domain",children:Z(x.url)})]}),e.jsx("div",{className:"ticker-quote-track",ref:P,children:e.jsx("div",{className:`ticker-quote ${k?"needs-scroll":""}`,ref:E,style:k?{"--scroll-duration":`${q}s`}:void 0,children:x.pullQuote||x.source},f)}),e.jsxs("div",{className:"ticker-footer",children:[e.jsx("span",{className:"ticker-date",children:M(x.timestamp)}),x.tags&&x.tags.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"ticker-separator",children:"â€¢"}),e.jsx("span",{className:"ticker-tags",children:x.tags.join(", ")})]})]}),e.jsx("div",{className:`ticker-progress ${I?"":"ticker-hidden"}`,children:e.jsxs("span",{children:[f+1," / ",re.length]})})]}),e.jsxs("div",{className:`ticker-controls ${I?"":"ticker-hidden"}`,children:[e.jsx("button",{className:"ticker-control",onClick:h=>{h.stopPropagation(),ae()},"aria-label":u?"Resume":"Pause","aria-pressed":u,children:u?e.jsx(ht,{className:"w-6 h-6"}):e.jsx(mt,{className:"w-6 h-6"})}),e.jsx("button",{className:"ticker-control",onClick:h=>{h.stopPropagation(),R()},"aria-label":"Next",children:e.jsx(gt,{className:"w-6 h-6"})}),r&&e.jsx("button",{className:"ticker-control",onClick:h=>{h.stopPropagation(),r()},"aria-label":"Close",children:e.jsx(me,{className:"w-6 h-6"})})]})]})}const _e="";function vt(){const[o,i]=n.useState(null),[r,u]=n.useState(!0),[m,w]=n.useState(!1),[f,v]=n.useState(!1),[g,D]=n.useState(""),[k,b]=n.useState(!1),[C,L]=n.useState(null),I=n.useCallback(async()=>{try{const E=await fetch(`${_e}/api/digest/status`);if(E.ok){const P=await E.json();i(P),L(null)}}catch{L("Could not fetch digest status")}finally{u(!1)}},[]);n.useEffect(()=>{I()},[I]);const U=async(E=!1)=>{w(!0),b(!1);try{const $=await(await fetch(`${_e}/api/digest/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({markAsDigested:E})})).json();$.success?(D($.html),v(!0),E&&I()):L($.error||"Failed to generate digest")}catch{L("Failed to generate digest")}finally{w(!1)}},q=async()=>{try{await navigator.clipboard.writeText(g),b(!0)}catch{const P=document.createElement("textarea");P.value=g,document.body.appendChild(P),P.select(),document.execCommand("copy"),document.body.removeChild(P),b(!0)}},V=async()=>{await U(!0),v(!1)};return r?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>U(!1),disabled:m||!o||o.undigestedCount===0,className:`px-3 py-1.5 rounded text-sm font-medium flex items-center gap-2 ${o!=null&&o.ready?"bg-amber-500 hover:bg-amber-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[m?"Generating...":"WP Digest",o&&e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${o.ready?"bg-amber-600":"bg-gray-400 dark:bg-gray-600"}`,children:o.undigestedCount})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["WordPress Digest (",o==null?void 0:o.undigestedCount," links)"]}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"âœ•"})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"HTML Output:"}),e.jsx("textarea",{readOnly:!0,value:g,className:"w-full h-48 p-2 font-mono text-sm border rounded dark:bg-gray-900 dark:border-gray-600"}),e.jsx("label",{className:"block text-sm font-medium mt-4 mb-2",children:"Preview:"}),e.jsx("div",{className:"p-3 border rounded bg-gray-50 dark:bg-gray-900 dark:border-gray-600 prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:g}})]}),e.jsxs("div",{className:"p-4 border-t dark:border-gray-700 flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 rounded border dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:q,className:`px-4 py-2 rounded ${k?"bg-green-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:k?"âœ“ Copied!":"Copy HTML"}),k&&e.jsx("button",{onClick:V,className:"px-4 py-2 rounded bg-amber-500 hover:bg-amber-600 text-white",children:"Mark as Digested"})]})]})}),C&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg",children:[C,e.jsx("button",{onClick:()=>L(null),className:"ml-2",children:"âœ•"})]})]})}const kt="YourNewPassword",Q="linkBlogData",K=120,ue={DATE_DESC:"date-desc",DATE_ASC:"date-asc",TITLE:"title"};function jt(){var Le;const[o,i]=n.useState([]),[r,u]=n.useState({url:"",source:"",pullQuote:"",tags:[],tagInput:""}),[m,w]=n.useState(!1),[f,v]=n.useState(""),[g,D]=n.useState([]),[k]=n.useState(ue.DATE_DESC),[b,C]=n.useState(null),[L,I]=n.useState(!1),[U,q]=n.useState(""),[V,E]=n.useState(!1),[P,$]=n.useState(null),[G]=n.useState(-1),[A,S]=n.useState(!1),[x,M]=n.useState(""),[Z,R]=n.useState(0),[X,ae]=n.useState(!1),[B,re]=n.useState(!1),[h,j]=n.useState([]),[_,ee]=n.useState(new Set),[J,W]=n.useState(!1),[ne,he]=n.useState(null),[be,oe]=n.useState(null),[le,pe]=n.useState(!1),ve=n.useRef(null),ge=n.useRef(null),Fe=n.useRef(null),Qe=n.useRef({}),ke=n.useRef(null),ie=n.useDeferredValue(f),fe=n.useDeferredValue(g),qe=f!==ie,je=n.useCallback(async()=>{var s,l;const t={getItem:c=>{try{return localStorage.getItem(c)}catch{return null}},setItem:(c,p)=>{try{localStorage.setItem(c,p)}catch{}}};try{console.log("Loading links from storage...");const c=await fetch("/data/links.json?t="+Date.now());if(c.ok){const p=await c.json();console.log("Loaded JSON data:",p);const d=t.getItem(Q);let N=null;if(d&&(N=JSON.parse(d)),N&&N.lastUpdated&&p.lastUpdated){const z=new Date(p.lastUpdated).getTime(),te=new Date(N.lastUpdated).getTime(),y=((s=N.links)==null?void 0:s.length)||0,O=((l=p.links)==null?void 0:l.length)||0;O>y?(console.log(`Syncing from JSON: ${O} links (vs ${y} in browser)`),i(p.links||[]),t.setItem(Q,JSON.stringify(p)),oe({message:`Synced ${O-y} new links from server.`,localCount:y,jsonCount:O,synced:!0})):y>O?(i(N.links||[]),oe({message:`Browser has ${y-O} more links than server. Save to sync.`,localCount:y,jsonCount:O,localTime:new Date(N.lastUpdated).toLocaleString(),jsonTime:new Date(p.lastUpdated).toLocaleString()})):te>z?i(N.links||[]):(i(p.links||[]),t.setItem(Q,JSON.stringify(p)))}else i(p.links||[]),t.setItem(Q,JSON.stringify(p));return}}catch(c){console.warn("Could not load from JSON, falling back to localStorage:",c)}const a=t.getItem(Q);if(a)try{const c=JSON.parse(a);i(c.links||[])}catch{console.warn("Could not parse localStorage data")}},[]),F=n.useCallback(async t=>{const a={links:t,lastUpdated:new Date().toISOString()};try{localStorage.setItem(Q,JSON.stringify(a))}catch{console.warn("localStorage not available")}const s=!["localhost","127.0.0.1","newsfeeds.net"].some(l=>window.location.hostname.includes(l));try{if(!(await fetch("http://127.0.0.1:3001/api/save-links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to save to server");he(null),oe(null),console.log(`âœ… Saved ${t.length} links to server`)}catch(l){console.error("Could not save to server:",l),s?console.log("âœ“ Changes saved to browser localStorage (server sync not available on static hosting)"):he({message:`Save failed! ${t.length} links saved to browser only.`,details:"API server not responding. Start it with: npm run dev:save",timestamp:new Date().toLocaleTimeString()})}},[]),Be=n.useCallback(async()=>{try{const t=await wt();j(t)}catch(t){console.error("Error loading archive metadata:",t)}},[]),Ne=n.useCallback(async t=>{if(!_.has(t))try{const a=await yt(t);i(s=>[...s,...a]),ee(s=>new Set([...s,t])),console.log(`Loaded ${a.length} links from ${t} archive`)}catch(a){console.error(`Error loading archive ${t}:`,a)}},[_]),Se=n.useCallback(async()=>{for(const t of h)await Ne(t.year)},[h,Ne]),xe=n.useCallback(()=>{var t;try{const a=localStorage.getItem(Q);if(a){const s={...JSON.parse(a),backupTimestamp:new Date().toISOString()};localStorage.setItem(`${Q}_backup`,JSON.stringify(s)),console.log(`ðŸ”„ Auto-backup: ${((t=s.links)==null?void 0:t.length)||0} links backed up at ${new Date().toLocaleTimeString()}`)}}catch{}},[]);n.useEffect(()=>{if(!["localhost","127.0.0.1","newsfeeds.net"].some(s=>window.location.hostname.includes(s)))return;const a=setTimeout(()=>{xe()},3e4);return ge.current=setInterval(()=>{xe()},300*1e3),()=>{clearTimeout(a),ge.current&&clearInterval(ge.current)}},[xe]),n.useEffect(()=>{je(),Be();const t=new URLSearchParams(window.location.search),a=t.get("admin"),s=a?a.replace(/[?&#\s]+$/,""):"";w(s===kt);const l=t.get("tag");l&&D([l])},[je]),n.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("admin"),s=new URLSearchParams;a&&s.set("admin",a),g.length===1&&s.set("tag",g[0]);const l=s.toString()?`?${s.toString()}`:window.location.pathname;window.history.replaceState({},"",l)},[g]);const Ce=async t=>{var a,s;try{const l=await fetch(`https://api.microlink.io/?url=${encodeURIComponent(t)}`);if(!l.ok)throw new Error("Failed to fetch metadata");const c=await l.json();if(c.status==="success"&&c.data)return{title:c.data.title||"",description:c.data.description||"",image:((a=c.data.image)==null?void 0:a.url)||"",favicon:((s=c.data.logo)==null?void 0:s.url)||""}}catch(l){console.error("Error fetching metadata:",l)}try{return{title:new URL(t).hostname.replace("www.",""),description:"",image:"",favicon:""}}catch(l){return console.error("Invalid URL:",t,l),{title:t,description:"",image:"",favicon:""}}},Je=async()=>{var c;if(!r.url||!r.source)return;if(r.source.length>K){alert(`Title must be less than ${K} characters`);return}const t=x.trim().toLowerCase(),a=t&&!((c=r.tags)!=null&&c.includes(t))?[...r.tags||[],t]:r.tags||[],s={id:Date.now(),url:r.url,source:r.source,pullQuote:r.pullQuote||"",tags:a,isPinned:r.isPinned||!1,timestamp:new Date().toISOString(),visits:0},l=[...o,s];i(l);try{await F(l),u({url:"",source:"",pullQuote:"",tags:[],tagInput:"",isPinned:!1}),M(""),b&&C(null)}catch(p){console.error("Failed to add link:",p)}},He=async()=>{var c;if(!b||!m)return;const t=x.trim().toLowerCase(),a=t&&!((c=r.tags)!=null&&c.includes(t))?[...r.tags||[],t]:r.tags||[],s={id:b.id,url:r.url,source:r.source,pullQuote:r.pullQuote||"",tags:a,isPinned:r.isPinned||!1,timestamp:b.timestamp,visits:b.visits||0},l=o.map(p=>p.id===b.id?s:p);try{await F(l),C(null),u({url:"",source:"",pullQuote:"",tags:[],tagInput:"",isPinned:!1}),M("")}catch(p){console.error("Failed to update link:",p)}},ze=n.useCallback(t=>{m&&(C(t),u({...t,pullQuote:t.pullQuote||"",tags:t.tags||[],tagInput:""}),M(""),I(!1),window.scrollTo({top:0,behavior:"smooth"}))},[m]),Ve=async t=>{if(!confirm("Delete this link?"))return;const a=o.filter(s=>s.id!==t);i(a),await F(a)},We=async t=>{const a=o.map(s=>s.id===t?{...s,isPinned:!s.isPinned}:s);i(a),await F(a)},Ye=()=>{try{const t=new Date().toISOString().replace(/[:.]/g,"-").split("T"),a=t[0],s=t[1].split("-").slice(0,2).join("-"),l=JSON.stringify({links:o,lastUpdated:new Date().toISOString(),exportedAt:new Date().toISOString(),totalLinks:o.length},null,2),c=new Blob([l],{type:"application/json"}),p=URL.createObjectURL(c),d=document.createElement("a");d.href=p,d.download=`link-blog-export-${a}-${s}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(p),console.log(`âœ… Exported ${o.length} links`)}catch(t){console.error("âŒ Export failed:",t),alert("Export failed. Please try again or check the console for details.")}},Ke=t=>{const a=t.target.files[0];if(!a)return;console.log("ðŸ“¥ Starting import of",a.name);const s=new FileReader;s.onload=async l=>{try{const c=JSON.parse(l.target.result);if(!c.links||!Array.isArray(c.links))throw new Error('Invalid file format. Expected JSON with "links" array.');console.log(`ðŸ“Š File contains ${c.links.length} links`);const p=new Set(o.map(y=>y.url)),d=c.links.filter(y=>!y.url||!y.source?!1:!p.has(y.url)).map(y=>({...y,id:y.id||Date.now()+Math.random(),timestamp:y.timestamp||new Date().toISOString(),visits:y.visits||0,tags:Array.isArray(y.tags)?y.tags:[],isPinned:!!y.isPinned})),N=c.links.length-d.length,z=d.length>0?`Import ${d.length} new links?${N>0?` (${N} duplicates will be skipped)`:""}`:`No new links to import (${N} duplicates found)`;if(d.length===0){alert(z),console.log("â„¹ï¸",z);return}if(window.confirm(z)){const y=[...o,...d];try{i(y),await F(y);const O=`âœ… Successfully imported ${d.length} links!`;console.log(O),alert(O)}catch(O){console.error("âŒ Failed to save imported links:",O),i(y),alert(`âš ï¸ Imported ${d.length} links to UI, but save failed. Check if API server is running.`)}}}catch(c){console.error("âŒ Import failed:",c),alert(`Import failed: ${c.message}`)}},s.onerror=()=>{console.error("âŒ File reading failed"),alert("Failed to read the file. Please try again.")},s.readAsText(a),t.target.value=""},Ge=n.useCallback(async t=>{const a=t.split(`
`).map(l=>l.trim()).filter(l=>l),s=[];for(const l of a){const c=await Ce(l),p=Me(l,c.title,c.description);s.push({url:l,source:(c.title||l).slice(0,K),pullQuote:"",tags:p.slice(0,5),metadata:c})}return s},[]),Ze=async()=>{if(U.trim()){E(!0);try{const s=[...(await Ge(U)).map(l=>({id:Date.now()+Math.random(),url:l.url,source:l.source,pullQuote:l.pullQuote||"",tags:l.tags,timestamp:new Date().toISOString(),visits:0})),...o];i(s),await F(s),q(""),I(!1)}catch(t){console.error("Failed to add links:",t),alert("Failed to add some links")}finally{E(!1)}}},Xe=async t=>{try{await navigator.clipboard.writeText(t.url),$(t.id),setTimeout(()=>$(null),2e3)}catch(a){console.error("Failed to copy:",a)}},ce=n.useMemo(()=>{const t={};return o.forEach(a=>{(a.tags||[]).forEach(s=>{t[s]=(t[s]||0)+1})}),Object.entries(t).sort((a,s)=>s[1]-a[1]).map(([a,s])=>({tag:a,count:s}))},[o]),H=n.useMemo(()=>{if(!x.trim())return[];const t=x.trim().toLowerCase(),a=(r.tags||[]).map(s=>s.toLowerCase());return ce.filter(({tag:s})=>s.toLowerCase().startsWith(t)&&!a.includes(s.toLowerCase())).slice(0,8)},[x,ce,r.tags]),Y=n.useMemo(()=>{let t=o;if(ie){const a=ie.toLowerCase();t=t.filter(s=>s.source.toLowerCase().includes(a)||s.url.toLowerCase().includes(a)||s.pullQuote&&s.pullQuote.toLowerCase().includes(a)||s.tags&&s.tags.some(l=>l.toLowerCase().includes(a)))}return fe.length>0&&(t=t.filter(a=>a.tags&&fe.every(s=>a.tags.includes(s)))),[...t].sort((a,s)=>{if(a.isPinned!==s.isPinned)return s.isPinned?1:-1;switch(k){case ue.DATE_ASC:return new Date(a.timestamp||0)-new Date(s.timestamp||0);case ue.TITLE:return a.source.localeCompare(s.source);case ue.DATE_DESC:default:return new Date(s.timestamp||0)-new Date(a.timestamp||0)}})},[o,ie,fe,k]);return e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[ne&&e.jsx("div",{className:"sticky top-0 z-50 bg-red-600 text-white px-4 py-3 shadow-lg",children:e.jsxs("div",{className:"container-width flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:ne.message}),e.jsx("p",{className:"text-sm text-red-100",children:ne.details})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-red-200",children:ne.timestamp}),e.jsx("button",{onClick:()=>he(null),className:"p-1 hover:bg-red-700 rounded",title:"Dismiss",children:e.jsx(me,{className:"w-4 h-4"})})]})]})}),be&&e.jsx("div",{className:"sticky top-0 z-50 bg-amber-500 text-amber-950 px-4 py-3 shadow-lg",children:e.jsxs("div",{className:"container-width flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"font-medium",children:be.message})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{F(o)},className:"px-3 py-1 bg-amber-700 text-white rounded text-sm font-medium hover:bg-amber-800",children:"Sync Now"}),e.jsx("button",{onClick:()=>oe(null),className:"p-1 hover:bg-amber-600 rounded",title:"Dismiss",children:e.jsx(me,{className:"w-4 h-4"})})]})]})}),(!B||m)&&e.jsxs("header",{className:"sticky top-0 z-20 bg-white",style:{maxHeight:"120px"},children:[e.jsx("div",{className:"bg-neutral-100 border-b border-neutral-200",children:e.jsxs("div",{className:"container-width flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-[11px] text-neutral-500 uppercase tracking-wide",children:"Est. 1994"}),e.jsx("time",{className:"text-[11px] text-neutral-500 uppercase tracking-wide",dateTime:new Date().toISOString(),children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),e.jsx("div",{className:"container-width py-2",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("h1",{className:"flex items-center gap-2",children:[e.jsx("a",{href:"https://mediaeater.com",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",title:"mediaeater.com",children:e.jsx("img",{src:"https://mediaeater.com/Images/mediaeater.png",alt:"mediaeater",className:"h-7 w-7 md:h-8 md:w-8 object-contain"})}),e.jsx("a",{href:"/",className:"text-xl md:text-2xl font-medium text-neutral-900 hover:text-neutral-600 transition-colors",style:{fontFamily:"'JetBrains Mono', monospace"},children:"newsfeeds.net"})]}),e.jsx("div",{className:"text-[10px] md:text-[11px] uppercase text-amber-700 mt-0.5",style:{letterSpacing:"0.2em",fontFamily:"'Inter', sans-serif"},children:"Human Edited & Curated"})]})}),e.jsx("nav",{className:"border-t border-neutral-200",children:e.jsxs("div",{className:"container-width",children:[e.jsxs("ul",{className:"hidden md:flex items-center justify-center py-2 text-sm text-neutral-600",style:{fontFamily:"'Inter', sans-serif"},children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>re(!B),className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",title:B?"Show full view":"Show minimal view",children:[Y.length,":",o.length]})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>ae(!X),className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",title:"Toggle legend",children:"Legend"})}),e.jsx("li",{children:e.jsx("a",{href:"/feed.xml",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",children:"RSS"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>{var t;Se(),(t=document.getElementById("archives-section"))==null||t.scrollIntoView({behavior:"smooth"})},className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",children:"Archive"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>pe(t=>!t),className:`px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors ${le?"text-neutral-900 font-medium":""}`,children:le?"Ticker â—":"Ticker"})}),e.jsx("li",{children:e.jsx("a",{href:"https://ghuneim.com",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors",children:"mediaeater.inc"})}),e.jsx("li",{children:J?e.jsx("input",{ref:ve,type:"text",value:f,onChange:t=>v(t.target.value),onBlur:()=>{f||setTimeout(()=>W(!1),150)},placeholder:"Search...",className:`w-32 px-2 py-1 text-sm border border-neutral-300 rounded focus:outline-none focus:border-neutral-500 ${qe?"opacity-70":""}`,"aria-label":"Search links",autoFocus:!0}):e.jsxs("button",{onClick:()=>W(!0),className:"px-3 flex items-center gap-1.5 hover:text-neutral-900 hover:underline underline-offset-4 transition-colors","aria-label":"Open search",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Search"})]})})]}),e.jsx("div",{className:"md:hidden overflow-x-auto scrollbar-hide",children:e.jsxs("ul",{className:"flex items-center py-2 text-sm text-neutral-600 whitespace-nowrap",style:{fontFamily:"'Inter', sans-serif"},children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>re(!B),className:"px-3 hover:text-neutral-900 transition-colors",children:[Y.length,":",o.length]})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>ae(!X),className:"px-3 hover:text-neutral-900 transition-colors",children:"Legend"})}),e.jsx("li",{children:e.jsx("a",{href:"/feed.xml",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 transition-colors",children:"RSS"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>{var t;Se(),(t=document.getElementById("archives-section"))==null||t.scrollIntoView({behavior:"smooth"})},className:"px-3 hover:text-neutral-900 transition-colors",children:"Archive"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>pe(t=>!t),className:`px-3 hover:text-neutral-900 transition-colors ${le?"font-medium":""}`,children:"Ticker"})}),e.jsx("li",{children:e.jsx("a",{href:"https://ghuneim.com",target:"_blank",rel:"noopener noreferrer",className:"px-3 hover:text-neutral-900 transition-colors",children:"mediaeater.inc"})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>W(!0),className:"px-3 flex items-center gap-1.5 hover:text-neutral-900 transition-colors",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Search"})]})})]})}),J&&e.jsx("div",{className:"md:hidden pb-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),e.jsx("input",{ref:ve,type:"text",value:f,onChange:t=>v(t.target.value),onBlur:()=>{f||setTimeout(()=>W(!1),150)},placeholder:"Search links...",className:"w-full pl-10 pr-4 py-2 text-sm border border-neutral-300 rounded focus:outline-none focus:border-neutral-500","aria-label":"Search links",autoFocus:!0})]})})]})}),e.jsx("div",{className:"border-b border-neutral-300"})]}),m&&e.jsx("div",{className:"bg-white border-b border-neutral-200",children:e.jsxs("div",{className:"container-width py-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>I(!1),className:`btn btn-sm ${L?"btn-ghost":"btn-primary"}`,children:[b?e.jsx(De,{className:"w-4 h-4 mr-2"}):e.jsx(pt,{className:"w-4 h-4 mr-2"}),b?"Edit Link":"Add Single Link"]}),e.jsxs("button",{onClick:()=>{I(!0),C(null)},className:`btn btn-sm ${L?"btn-primary":"btn-ghost"}`,children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Bulk Add URLs"]}),e.jsxs("button",{onClick:Ye,className:"btn btn-sm btn-outline",title:`Export all ${o.length} links to JSON file`,children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Export (",o.length,")"]}),e.jsxs("label",{className:"btn btn-sm btn-outline cursor-pointer",children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Import",e.jsx("input",{type:"file",accept:".json",onChange:Ke,className:"hidden",title:"Import links from JSON file"})]}),e.jsx(vt,{})]}),!L&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL"}),e.jsx("input",{type:"url",placeholder:"https://example.com",value:r.url,onChange:t=>u({...r,url:t.target.value}),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Title (",r.source.length,"/",K,")"]}),e.jsx("input",{type:"text",placeholder:"Link title or description",value:r.source,onChange:t=>u({...r,source:t.target.value}),maxLength:K,className:"input w-full"})]})]}),r.url&&(!r.source||r.tags.length===0)&&e.jsxs("button",{onClick:async()=>{const t=await Ce(r.url),a=Me(r.url,t.title,t.description);u(s=>{const l=s.tags.length===0?a.slice(0,5):s.tags;return{...s,source:s.source||(t.title||r.url).slice(0,K),tags:l,tagInput:l.join(", ")}})},className:"btn btn-sm btn-secondary",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Auto-fetch title & tags"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pull Quote (optional)"}),e.jsx("textarea",{placeholder:"Interesting quote or note about this link...",value:r.pullQuote||"",onChange:t=>u({...r,pullQuote:t.target.value}),className:"input w-full h-20"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Tags ",e.jsx("span",{className:"text-neutral-400 font-normal",children:"(Tab to add suggestion)"})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:(r.tags||[]).map((t,a)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-md",children:[t,e.jsx("button",{type:"button",onClick:()=>{const s=r.tags.filter((l,c)=>c!==a);u({...r,tags:s,tagInput:""})},className:"text-blue-600 hover:text-blue-900 ml-0.5","aria-label":`Remove ${t}`,children:e.jsx(me,{className:"w-3 h-3"})})]},`${t}-${a}`))}),e.jsx("input",{ref:ke,type:"text",placeholder:(Le=r.tags)!=null&&Le.length?"Add another tag...":"Type to add tags...",value:x,onChange:t=>{var s;const a=t.target.value;if(a.endsWith(",")){const l=a.slice(0,-1).trim().toLowerCase();l&&!((s=r.tags)!=null&&s.includes(l))&&u({...r,tags:[...r.tags||[],l],tagInput:""}),M(""),S(!1),R(0);return}M(a),S(a.trim().length>0),R(0)},onFocus:()=>{x.trim().length>0&&S(!0)},onBlur:()=>{setTimeout(()=>{var a;const t=x.trim().toLowerCase();t&&!((a=r.tags)!=null&&a.includes(t))&&u({...r,tags:[...r.tags||[],t],tagInput:""}),M(""),S(!1)},200)},onKeyDown:t=>{var a,s,l,c,p;if(t.key==="Escape"){S(!1);return}if(t.key==="Tab"&&x.trim()){t.preventDefault();let d;A&&H.length>0?d=(a=H[Z])==null?void 0:a.tag:d=x.trim().toLowerCase(),d&&!((s=r.tags)!=null&&s.includes(d))&&u({...r,tags:[...r.tags||[],d],tagInput:""}),M(""),S(!1),R(0);return}if(t.key==="Enter"){t.preventDefault();let d;A&&H.length>0?d=(l=H[Z])==null?void 0:l.tag:d=x.trim().toLowerCase(),d&&!((c=r.tags)!=null&&c.includes(d))&&u({...r,tags:[...r.tags||[],d],tagInput:""}),M(""),S(!1),R(0);return}if(t.key==="ArrowDown"&&A){t.preventDefault(),R(d=>Math.min(d+1,H.length-1));return}if(t.key==="ArrowUp"&&A){t.preventDefault(),R(d=>Math.max(d-1,0));return}if(t.key==="Backspace"&&!x&&((p=r.tags)==null?void 0:p.length)>0){const d=r.tags.slice(0,-1);u({...r,tags:d,tagInput:""})}},className:"input w-full"}),A&&H.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-blue-500 rounded-md shadow-lg max-h-48 overflow-y-auto",children:H.map(({tag:t,count:a},s)=>e.jsxs("button",{type:"button",onMouseDown:l=>{var c,p;l.preventDefault(),(c=r.tags)!=null&&c.includes(t)||u({...r,tags:[...r.tags||[],t],tagInput:""}),M(""),S(!1),R(0),(p=ke.current)==null||p.focus()},className:`w-full text-left px-3 py-2 text-sm transition-colors flex items-center justify-between border-b border-gray-100 last:border-b-0 ${s===Z?"bg-blue-100 text-blue-900":"hover:bg-blue-50"}`,children:[e.jsx("span",{className:"font-medium",children:t}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:a})]},t))}),ce.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-neutral-500",children:"Popular:"}),ce.slice(0,10).map(({tag:t})=>{var a,s;return e.jsx("button",{type:"button",onClick:()=>{var l;(l=r.tags)!=null&&l.includes(t)||u({...r,tags:[...r.tags||[],t],tagInput:""})},disabled:(a=r.tags)==null?void 0:a.includes(t),className:`tag text-xs ${(s=r.tags)!=null&&s.includes(t)?"opacity-40 cursor-not-allowed":""}`,children:t},t)})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.isPinned||!1,onChange:t=>u({...r,isPinned:t.target.checked}),className:"rounded border-neutral-300"}),e.jsx("span",{className:"text-sm",children:"Pin to top"})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[b&&e.jsx("button",{onClick:()=>{C(null),u({url:"",source:"",pullQuote:"",tags:[],tagInput:"",isPinned:!1})},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:b?He:Je,disabled:!r.url||!r.source,className:"btn btn-primary",children:b?"Update Link":"Add Link"})]})]})]}),L&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Add Multiple URLs (one per line)"}),e.jsx("textarea",{ref:Fe,value:U,onChange:t=>q(t.target.value),placeholder:"Paste URLs here...",className:"input w-full h-32 font-mono text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ze,disabled:!U.trim()||V,className:"btn btn-primary",children:V?"Processing...":"Add All Links"}),e.jsx("button",{onClick:()=>{I(!1),q("")},className:"btn btn-secondary",children:"Cancel"})]})]})]})}),e.jsx("main",{className:"container-width section-y",children:e.jsxs("div",{className:"space-y-3",children:[!B&&X&&e.jsx("div",{className:"legend-box mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Title:"})," Source/article name"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"URL:"})," Domain shown below title"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Quote:"})," Pull quote or excerpt"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Tags:"})," Click to filter or bookmark a topic"]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"font-medium text-neutral-700",children:"Date:"})," When link was added"]})]})}),Y.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-neutral-500",children:"No links found"})}):Y.map((t,a)=>{const s=new Date(t.timestamp).getFullYear(),l=Y[a-1],c=l?new Date(l.timestamp).getFullYear():null,p=c!==null&&s!==c;return e.jsxs(n.Fragment,{children:[p&&e.jsx("div",{id:"archives-section",className:"py-4 mt-6 mb-2 border-t-2 border-neutral-300",children:e.jsx("h2",{className:"text-xl font-bold text-neutral-700",children:s})}),e.jsx("article",{ref:d=>Qe.current[a]=d,className:`link-card group ${G===a?"ring-2 ring-primary-500 ring-offset-2":""}`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[t.isPinned&&e.jsx(Ae,{className:"w-4 h-4 text-neutral-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-neutral-900 truncate",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary-600 transition-colors",onClick:()=>{if(m){const d=o.map(N=>N.id===t.id?{...N,visits:(N.visits||0)+1}:N);i(d),F(d)}},children:t.source})}),e.jsx("p",{className:"text-sm text-neutral-500 truncate",children:(()=>{try{return new URL(t.url).hostname.replace("www.","")}catch{return t.url}})()})]})]}),t.pullQuote&&e.jsx("div",{className:"mt-2 text-sm text-neutral-600 italic space-y-2",children:t.pullQuote.split(`

`).map((d,N)=>e.jsx("p",{children:d.split(`
`).map((z,te,y)=>e.jsxs("span",{children:[z,te<y.length-1&&e.jsx("br",{})]},te))},N))}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:t.tags.map(d=>e.jsx("button",{onClick:()=>{g.includes(d)?D(g.filter(N=>N!==d)):D([...g,d])},className:"tag",children:d},d))}),e.jsx("div",{className:"mt-3 flex items-center gap-4 text-xs text-neutral-400",children:e.jsxs("span",{children:[new Date(t.timestamp).toLocaleDateString(),t.visits>0&&` [${t.visits}]`]})})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>Xe(t),className:"btn-ghost p-2",title:"Copy link",children:P===t.id?e.jsx(it,{className:"w-4 h-4 text-success"}):e.jsx(ct,{className:"w-4 h-4"})}),m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ze(t),className:"btn-ghost p-2",title:"Edit link",children:e.jsx(De,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>We(t.id),className:"btn-ghost p-2",title:"Pin link",children:e.jsx(Ae,{className:`w-4 h-4 ${t.isPinned?"fill-current":""}`})}),e.jsx("button",{onClick:()=>Ve(t.id),className:"btn-ghost p-2 text-error",title:"Delete link",children:e.jsx(ft,{className:"w-4 h-4"})})]})]})]})})]},t.id)})]})}),e.jsx(bt,{links:Y,forceShow:le,onClose:()=>pe(!1)})]})}class Nt extends n.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(i){return{hasError:!0}}componentDidCatch(i,r){console.error("Error caught by boundary:",i),console.error("Error info:",r),this.setState({error:i,errorInfo:r})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",fontFamily:"monospace"},children:[e.jsx("h2",{style:{color:"red"},children:"Something went wrong!"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[e.jsx("summary",{children:"Click to see error details"}),e.jsx("p",{style:{color:"red"},children:this.state.error&&this.state.error.toString()}),e.jsx("pre",{children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}):this.props.children}}function St(){return e.jsx(Nt,{children:e.jsx(jt,{})})}rt.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(St,{})}));
//# sourceMappingURL=index-DBqbi0hG.js.map
